# ChannelFactory

Creates and manages the channels that are used by clients to send messages to service endpoints.



# How to: Use the ChannelFactory

The generic [ChannelFactory](https://docs.microsoft.com/en-us/dotnet/api/system.servicemodel.channelfactory-1) class is used in advanced scenarios that require the creation of a channel factory that can be used to create more than one channel.

### To create and use the ChannelFactory class

1. Build and run an Windows Communication Foundation (WCF) service. For more information, see [Designing and Implementing Services](https://docs.microsoft.com/en-us/dotnet/framework/wcf/designing-and-implementing-services), [Configuring Services](https://docs.microsoft.com/en-us/dotnet/framework/wcf/configuring-services), and [Hosting Services](https://docs.microsoft.com/en-us/dotnet/framework/wcf/hosting-services).
2. Use the [ServiceModel Metadata Utility Tool (Svcutil.exe)](https://docs.microsoft.com/en-us/dotnet/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe) to generate the contract (interface) for the client.
3. In the client code, use the [ChannelFactory](https://docs.microsoft.com/en-us/dotnet/api/system.servicemodel.channelfactory-1) class to create multiple endpoint listeners.



```c#
using System;
using System.ServiceModel;

// This code generated by svcutil.exe.
[ServiceContract()]
interface IMath
{
    [OperationContract()]
     double Add(double A, double B);
}

public class Math : IMath
{
    public double Add(double A, double B)
    {
        return A + B;
    }
}

public sealed class Test
{
    static void Main()
    {
        // Code not shown.
    }

    public void Run()
    {
        // This code is written by an application developer.
        // Create a channel factory.
        BasicHttpBinding myBinding = new BasicHttpBinding();
    
        EndpointAddress myEndpoint = new EndpointAddress("http://localhost/MathService/Ep1");

        ChannelFactory<IMath> myChannelFactory = new ChannelFactory<IMath>(myBinding, myEndpoint);

        // Create a channel.
        IMath wcfClient1 = myChannelFactory.CreateChannel();
        double s = wcfClient1.Add(3, 39);
        Console.WriteLine(s.ToString());
    ((IClientChannel)wcfClient1).Close();

        // Create another channel.
        IMath wcfClient2 = myChannelFactory.CreateChannel();
        s = wcfClient2.Add(15, 27);
        Console.WriteLine(s.ToString());
    ((IClientChannel)wcfClient2).Close();
    myChannelFactory.Close();
    }
}
```

